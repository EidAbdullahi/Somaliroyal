<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROYAL | Premium Men's Fashion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        royal: '#D4AF37',
                        'royal-dark': '#B8941F',
                        'royal-light': '#F4E4BC',
                        dark: '#0a0a0a',
                        'dark-light': '#1a1a1a',
                        'dark-lighter': '#2d2d2d',
                        tiktok: '#00f2ea',
                        'tiktok-pink': '#ff0050',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0a0a0a; color: #ffffff; overflow-x: hidden; }
        .font-display { font-family: 'Playfair Display', serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #D4AF37; }
        .glass { background: rgba(212, 175, 55, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(212, 175, 55, 0.1); }
        .glass-strong { background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(212, 175, 55, 0.1); }
        .text-gradient { background: linear-gradient(135deg, #D4AF37 0%, #F4E4BC 50%, #D4AF37 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; background-size: 200% auto; animation: shimmer 3s linear infinite; }
        @keyframes shimmer { 0% { background-position: -200% center; } 100% { background-position: 200% center; } }
        .gold-border { border: 1px solid rgba(212, 175, 55, 0.3); box-shadow: 0 0 20px rgba(212, 175, 55, 0.1); }
        .gold-border:hover { border-color: rgba(212, 175, 55, 0.6); box-shadow: 0 0 30px rgba(212, 175, 55, 0.2); }
        .product-card { position: relative; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .product-card:hover { transform: translateY(-8px); }
        .product-media-container { position: relative; overflow: hidden; background: #1a1a1a; border-radius: 1rem; aspect-ratio: 9/16; transform: translateZ(0); will-change: transform; }
        .product-poster { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transition: opacity 0.4s ease, transform 0.6s ease; z-index: 3; }
        .video-wrapper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 0.4s ease; z-index: 2; background: #000; }
        .video-wrapper.active { opacity: 1; z-index: 4; }
        .tiktok-iframe { width: 100%; height: 100%; border: none; object-fit: cover; }
        .video-loading { position: absolute; inset: 0; background: linear-gradient(135deg, #00f2ea20 0%, #ff005020 100%); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s; z-index: 5; pointer-events: none; }
        .video-loading.active { opacity: 1; }
        .loading-spinner { width: 50px; height: 50px; border: 3px solid rgba(255,255,255,0.1); border-top-color: #00f2ea; border-right-color: #ff0050; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .tiktok-badge { position: absolute; top: 1rem; right: 1rem; background: linear-gradient(135deg, #00f2ea 0%, #ff0050 100%); color: #fff; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1rem; z-index: 10; border: 2px solid rgba(255, 255, 255, 0.3); box-shadow: 0 4px 15px rgba(0, 242, 234, 0.4); animation: pulse 2s infinite; pointer-events: none; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.9; } }
        .video-facade-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); width: 80px; height: 80px; background: linear-gradient(135deg, #00f2ea 0%, #ff0050 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 1.75rem; z-index: 6; opacity: 0; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); cursor: pointer; border: 3px solid rgba(255, 255, 255, 0.3); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 242, 234, 0.3); }
        .product-card:hover .video-facade-btn { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        .video-facade-btn:hover { transform: translate(-50%, -50%) scale(1.15); box-shadow: 0 0 40px rgba(0, 242, 234, 0.6); }
        .video-facade-btn.playing { opacity: 0; pointer-events: none; }
        .video-duration { position: absolute; bottom: 1rem; right: 1rem; background: rgba(0, 0, 0, 0.85); color: #00f2ea; padding: 0.35rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 700; z-index: 6; display: flex; align-items: center; gap: 0.35rem; border: 1px solid rgba(0, 242, 234, 0.3); backdrop-filter: blur(4px); pointer-events: none; }
        .product-actions { position: absolute; bottom: 0; left: 0; right: 0; padding: 1rem; background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.8) 50%, transparent 100%); display: flex; gap: 0.75rem; opacity: 0; transform: translateY(10px); transition: all 0.3s ease; z-index: 10; }
        .product-card:hover .product-actions { opacity: 1; transform: translateY(0); }
        .action-btn { flex: 1; padding: 0.875rem; border-radius: 0.75rem; font-weight: 600; font-size: 0.875rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.2s ease; border: none; cursor: pointer; }
        .action-btn-primary { background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%); color: #000; }
        .action-btn-primary:hover { background: linear-gradient(135deg, #F4E4BC 0%, #D4AF37 100%); transform: scale(1.02); box-shadow: 0 4px 20px rgba(212, 175, 55, 0.5); }
        .action-btn-secondary { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(212, 175, 55, 0.3); }
        .action-btn-secondary:hover { background: rgba(212, 175, 55, 0.2); border-color: rgba(212, 175, 55, 0.6); }
        .quick-add-btn { position: absolute; top: 1rem; right: 4rem; width: 44px; height: 44px; background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #000; font-size: 1.25rem; box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 10; border: 2px solid #D4AF37; opacity: 0; transform: scale(0.8); }
        .product-card:hover .quick-add-btn { opacity: 1; transform: scale(1); }
        .quick-add-btn:hover { transform: scale(1.1) rotate(90deg); box-shadow: 0 6px 25px rgba(212, 175, 55, 0.6); }
        .cart-sidebar, .wishlist-sidebar { transform: translateX(100%); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .cart-sidebar.open, .wishlist-sidebar.open { transform: translateX(0); }
        .toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%) translateY(100px); background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%); color: #000; padding: 1rem 2rem; border-radius: 9999px; font-weight: 700; display: flex; align-items: center; gap: 0.75rem; box-shadow: 0 10px 40px rgba(212, 175, 55, 0.4); z-index: 100; opacity: 0; transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .product-badge { position: absolute; top: 1rem; left: 1rem; background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%); color: #000; padding: 0.5rem 1rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; z-index: 10; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .product-badge.sale { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: #fff; }
        .product-badge.limited { background: linear-gradient(135deg, #7c3aed 0%, #4c1d95 100%); color: #fff; }
        .product-badge.new { background: linear-gradient(135deg, #059669 0%, #047857 100%); color: #fff; }
        .modal { opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .modal.active { opacity: 1; visibility: visible; }
        .size-btn { transition: all 0.2s; border: 2px solid rgba(212, 175, 55, 0.3); }
        .size-btn:hover { border-color: rgba(212, 175, 55, 0.6); background: rgba(212, 175, 55, 0.1); }
        .size-btn.selected { background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%); color: #000; border-color: #D4AF37; font-weight: 700; transform: scale(1.05); }
        .whatsapp-float { position: fixed; bottom: 2rem; right: 2rem; z-index: 50; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .reveal.active { opacity: 1; transform: translateY(0); }
        .cart-item { animation: slideIn 0.4s ease; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }
        .qty-btn { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: rgba(212, 175, 55, 0.1); border-radius: 0.5rem; transition: all 0.2s; border: 1px solid rgba(212, 175, 55, 0.2); }
        .qty-btn:hover { background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%); color: #000; transform: scale(1.1); }
        .category-pill { transition: all 0.3s ease; border: 2px solid rgba(212, 175, 55, 0.2); position: relative; overflow: hidden; }
        .category-pill::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent); transition: left 0.5s; }
        .category-pill:hover::before { left: 100%; }
        .category-pill:hover { border-color: rgba(212, 175, 55, 0.6); transform: translateY(-2px); }
        .category-pill.active { background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%); color: #000; border-color: #D4AF37; font-weight: 700; box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3); }
        .crown-icon { display: inline-block; animation: float 2s ease-in-out infinite; }
        .royal-glow { box-shadow: 0 0 40px rgba(212, 175, 55, 0.15); }
        .tiktok-modal { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.98); z-index: 100; display: none; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .tiktok-modal.active { display: flex; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .tiktok-modal iframe { max-width: 90%; max-height: 90%; border-radius: 1rem; border: 2px solid rgba(0, 242, 234, 0.3); box-shadow: 0 0 60px rgba(0, 242, 234, 0.2); }
        .tiktok-modal-close { position: absolute; top: 2rem; right: 2rem; width: 56px; height: 56px; background: linear-gradient(135deg, #00f2ea 0%, #ff0050 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 1.5rem; cursor: pointer; transition: all 0.3s ease; border: 3px solid rgba(255, 255, 255, 0.3); z-index: 10; }
        .tiktok-modal-close:hover { transform: scale(1.1) rotate(90deg); box-shadow: 0 0 30px rgba(0, 242, 234, 0.5); }
        .img-loading { filter: blur(10px); transform: scale(1.1); }
        .img-loaded { filter: blur(0); transform: scale(1); transition: all 0.5s ease; }
        #category-nav { transition: all 0.3s ease; }
        #category-nav.sticky-active { background: rgba(10, 10, 10, 0.98); box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
        .price-tag { position: relative; display: inline-block; }
        .price-tag::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0; height: 2px; background: #D4AF37; transition: width 0.3s ease; }
        .product-card:hover .price-tag::after { width: 100%; }
        .wishlist-btn { position: absolute; top: 1rem; left: 4rem; width: 44px; height: 44px; background: rgba(255, 255, 255, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 1.25rem; transition: all 0.3s ease; z-index: 10; border: 2px solid rgba(255, 255, 255, 0.2); opacity: 0; transform: scale(0.8); }
        .product-card:hover .wishlist-btn { opacity: 1; transform: scale(1); }
        .wishlist-btn:hover { background: rgba(220, 38, 38, 0.9); border-color: rgba(220, 38, 38, 0.5); transform: scale(1.1); }
        .wishlist-btn.active { background: rgba(220, 38, 38, 0.9); color: #fff; }
        .stock-status { display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.75rem; color: #10b981; font-weight: 600; }
        .stock-status.low { color: #f59e0b; }
        .stock-status.out { color: #ef4444; }
        .color-swatch { width: 24px; height: 24px; border-radius: 50%; border: 2px solid transparent; cursor: pointer; transition: all 0.2s ease; position: relative; }
        .color-swatch:hover { transform: scale(1.2); border-color: #D4AF37; }
        .color-swatch.selected { border-color: #D4AF37; box-shadow: 0 0 0 2px #0a0a0a, 0 0 0 4px #D4AF37; }
        .color-swatch::after { content: ''; position: absolute; inset: -4px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.1); }
        html { scroll-behavior: smooth; }
        *:focus-visible { outline: 2px solid #D4AF37; outline-offset: 2px; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .tiktok-gradient-text { background: linear-gradient(135deg, #00f2ea 0%, #ff0050 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        
        /* Responsive Touch Optimizations */
        @media (max-width: 640px) {
            .product-card:hover { transform: translateY(-4px); }
            .video-facade-btn { width: 64px; height: 64px; font-size: 1.5rem; opacity: 1; transform: translate(-50%, -50%) scale(1); }
            .product-actions { opacity: 1; transform: translateY(0); padding: 0.75rem; }
            .action-btn { padding: 0.75rem; font-size: 0.75rem; }
            .quick-add-btn, .wishlist-btn { opacity: 1; transform: scale(1); width: 36px; height: 36px; font-size: 1rem; }
            .quick-add-btn { right: 3.5rem; }
            .wishlist-btn { left: 3.5rem; }
            .tiktok-badge { width: 32px; height: 32px; font-size: 0.875rem; }
            .product-badge { font-size: 0.625rem; padding: 0.375rem 0.75rem; }
            .video-duration { font-size: 0.625rem; padding: 0.25rem 0.5rem; }
            .whatsapp-float { bottom: 1rem; right: 1rem; }
            .whatsapp-float button { width: 56px; height: 56px; font-size: 1.75rem; }
            .toast { padding: 0.75rem 1.5rem; font-size: 0.875rem; bottom: 80px; }
            .cart-sidebar, .wishlist-sidebar { width: 100%; }
            #quick-view-modal > div { max-height: 100vh; border-radius: 0; }
            #quick-view-modal .grid { grid-template-columns: 1fr; }
            #quick-view-modal .h-\[300px\] { height: 250px; }
        }
        
        @media (max-width: 768px) {
            .font-display.text-6xl { font-size: 2.5rem; }
            .font-display.text-5xl { font-size: 2rem; }
            .font-display.text-4xl { font-size: 1.75rem; }
            .font-display.text-3xl { font-size: 1.5rem; }
        }
        
        @media (hover: none) {
            .product-card:hover .video-facade-btn { opacity: 1; }
            .video-facade-btn { opacity: 1; }
        }
        
        /* Prevent horizontal scroll */
        body { max-width: 100vw; overflow-x: hidden; }
        
        /* Safe area insets for notched devices */
        @supports (padding: max(0px)) {
            .fixed.bottom-0, .fixed.bottom-2, .whatsapp-float { padding-bottom: max(1rem, env(safe-area-inset-bottom)); }
            .fixed.top-0 { padding-top: max(0px, env(safe-area-inset-top)); }
            .fixed.left-0 { padding-left: max(0px, env(safe-area-inset-left)); }
            .fixed.right-0 { padding-right: max(0px, env(safe-area-inset-right)); }
        }
    </style>
</head>
<body class="antialiased">
    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-strong transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 sm:h-20">
                <div class="flex-shrink-0 flex items-center cursor-pointer group" onclick="window.scrollTo(0,0)">
                    <span class="font-display text-2xl sm:text-3xl font-bold tracking-wider text-white flex items-center gap-2 group-hover:text-royal transition-colors">
                        <i class="fas fa-crown text-royal crown-icon"></i>
                        <span class="hidden sm:inline">ROYAL</span>
                    </span>
                    <span class="ml-2 px-2 py-1 bg-royal/20 text-royal text-xs font-bold rounded-full border border-royal/30 group-hover:bg-royal group-hover:text-black transition-all sm:ml-3 sm:px-3">MEN</span>
                    <span class="ml-2 px-2 py-1 bg-gradient-to-r from-tiktok to-tiktok-pink text-white text-xs font-bold rounded-full hidden sm:inline-flex">
                        <i class="fab fa-tiktok mr-1"></i>Powered
                    </span>
                </div>

                <div class="hidden md:flex items-center space-x-8">
                    <a onclick="filterCategory('all')" class="text-sm font-medium text-gray-300 hover:text-royal transition-colors cursor-pointer relative group">All<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-royal transition-all group-hover:w-full"></span></a>
                    <a onclick="filterCategory('streetwear')" class="text-sm font-medium text-gray-300 hover:text-royal transition-colors cursor-pointer relative group">Streetwear<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-royal transition-all group-hover:w-full"></span></a>
                    <a onclick="filterCategory('formal')" class="text-sm font-medium text-gray-300 hover:text-royal transition-colors cursor-pointer relative group">Formal<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-royal transition-all group-hover:w-full"></span></a>
                    <a onclick="filterCategory('casual')" class="text-sm font-medium text-gray-300 hover:text-royal transition-colors cursor-pointer relative group">Casual<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-royal transition-all group-hover:w-full"></span></a>
                    <a onclick="filterCategory('activewear')" class="text-sm font-medium text-gray-300 hover:text-royal transition-colors cursor-pointer relative group">Activewear<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-royal transition-all group-hover:w-full"></span></a>
                    <a onclick="filterCategory('outerwear')" class="text-sm font-medium text-gray-300 hover:text-royal transition-colors cursor-pointer relative group">Outerwear<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-royal transition-all group-hover:w-full"></span></a>
                </div>

                <div class="flex items-center space-x-3 sm:space-x-6">
                    <button onclick="toggleSearch()" class="text-gray-300 hover:text-royal transition-colors p-2 hover:bg-white/5 rounded-full" aria-label="Search">
                        <i class="fas fa-search text-lg"></i>
                    </button>
                    <button onclick="toggleWishlist()" class="text-gray-300 hover:text-royal transition-colors p-2 hover:bg-white/5 rounded-full relative" aria-label="Wishlist">
                        <i class="fas fa-heart text-lg"></i>
                        <span id="wishlist-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center transform scale-0 transition-transform">0</span>
                    </button>
                    <button onclick="toggleCart()" class="text-gray-300 hover:text-royal transition-colors relative p-2 hover:bg-white/5 rounded-full" aria-label="Cart">
                        <i class="fas fa-shopping-bag text-xl"></i>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-royal text-black text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center transform scale-0 transition-transform">0</span>
                    </button>
                    <button class="md:hidden text-gray-300 hover:text-royal p-2 hover:bg-white/5 rounded-full" onclick="toggleMobileMenu()" aria-label="Menu">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Search Bar -->
        <div id="search-bar" class="hidden border-t border-gray-800 bg-dark-light px-4 py-4 animate-fade-up">
            <div class="max-w-3xl mx-auto relative">
                <input type="text" id="search-input" placeholder="Search shirts, jackets, pants, brands..." 
                    class="w-full bg-dark-lighter border border-gray-700 rounded-full px-6 py-3 pl-12 text-white focus:outline-none focus:border-royal transition-colors text-sm sm:text-base"
                    onkeyup="filterProducts()">
                <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500"></i>
                <button onclick="toggleSearch()" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-royal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden glass-strong border-t border-gray-800">
            <div class="px-4 py-4 space-y-2">
                <a onclick="filterCategory('all'); toggleMobileMenu()" class="block px-3 py-3 text-base font-medium text-gray-300 hover:text-royal hover:bg-white/5 rounded-md cursor-pointer transition-colors">All Products</a>
                <a onclick="filterCategory('streetwear'); toggleMobileMenu()" class="block px-3 py-3 text-base font-medium text-gray-300 hover:text-royal hover:bg-white/5 rounded-md cursor-pointer transition-colors">üî• Streetwear</a>
                <a onclick="filterCategory('formal'); toggleMobileMenu()" class="block px-3 py-3 text-base font-medium text-gray-300 hover:text-royal hover:bg-white/5 rounded-md cursor-pointer transition-colors">üëî Formal Wear</a>
                <a onclick="filterCategory('casual'); toggleMobileMenu()" class="block px-3 py-3 text-base font-medium text-gray-300 hover:text-royal hover:bg-white/5 rounded-md cursor-pointer transition-colors">üëï Casual</a>
                <a onclick="filterCategory('activewear'); toggleMobileMenu()" class="block px-3 py-3 text-base font-medium text-gray-300 hover:text-royal hover:bg-white/5 rounded-md cursor-pointer transition-colors">üèÉ Activewear</a>
                <a onclick="filterCategory('outerwear'); toggleMobileMenu()" class="block px-3 py-3 text-base font-medium text-gray-300 hover:text-royal hover:bg-white/5 rounded-md cursor-pointer transition-colors">üß• Outerwear</a>
            </div>
        </div>
    </nav>

    <!-- Wishlist Sidebar -->
    <div id="wishlist-overlay" class="fixed inset-0 bg-black/80 z-50 hidden backdrop-blur-sm" onclick="toggleWishlist()"></div>
    <div id="wishlist-sidebar" class="fixed right-0 top-0 h-full w-full sm:w-[420px] bg-dark-light z-50 wishlist-sidebar overflow-y-auto border-l border-royal/20 shadow-2xl">
        <div class="p-4 sm:p-6 border-b border-gray-800 flex justify-between items-center sticky top-0 bg-dark-light z-10">
            <h2 class="font-display text-xl sm:text-2xl font-bold flex items-center gap-2">
                <i class="fas fa-heart text-red-500"></i>
                Wishlist 
                <span id="wishlist-total-items" class="text-royal text-base sm:text-lg bg-royal/10 px-3 py-1 rounded-full border border-royal/20">0</span>
            </h2>
            <button onclick="toggleWishlist()" class="w-10 h-10 rounded-full bg-dark-lighter flex items-center justify-center hover:bg-royal hover:text-black transition-all border border-gray-700">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div id="wishlist-items" class="p-4 sm:p-6 space-y-4 min-h-[300px]">
            <div class="text-center text-gray-500 py-12">
                <i class="fas fa-heart text-5xl sm:text-6xl mb-4 opacity-20"></i>
                <p class="text-base sm:text-lg mb-2">Your wishlist is empty</p>
                <button onclick="toggleWishlist(); document.getElementById('products').scrollIntoView({behavior: 'smooth'})" class="text-royal hover:underline font-medium">Start Shopping</button>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div id="cart-overlay" class="fixed inset-0 bg-black/80 z-50 hidden backdrop-blur-sm" onclick="toggleCart()"></div>
    <div id="cart-sidebar" class="fixed right-0 top-0 h-full w-full sm:w-[420px] bg-dark-light z-50 cart-sidebar overflow-y-auto border-l border-royal/20 shadow-2xl">
        <div class="p-4 sm:p-6 border-b border-gray-800 flex justify-between items-center sticky top-0 bg-dark-light z-10">
            <h2 class="font-display text-xl sm:text-2xl font-bold flex items-center gap-2">
                <i class="fas fa-crown text-royal"></i>
                Your Cart 
                <span id="cart-total-items" class="text-royal text-base sm:text-lg bg-royal/10 px-3 py-1 rounded-full border border-royal/20">0</span>
            </h2>
            <button onclick="toggleCart()" class="w-10 h-10 rounded-full bg-dark-lighter flex items-center justify-center hover:bg-royal hover:text-black transition-all border border-gray-700">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div id="cart-items" class="p-4 sm:p-6 space-y-4 min-h-[300px]">
            <div class="text-center text-gray-500 py-12">
                <i class="fas fa-crown text-5xl sm:text-6xl mb-4 opacity-20"></i>
                <p class="text-base sm:text-lg mb-2">Your cart is empty</p>
                <button onclick="toggleCart(); document.getElementById('products').scrollIntoView({behavior: 'smooth'})" class="text-royal hover:underline font-medium">Start Shopping</button>
            </div>
        </div>

        <div class="p-4 sm:p-6 border-t border-gray-800 sticky bottom-0 bg-dark-light">
            <div class="space-y-3 mb-6">
                <div class="flex justify-between text-gray-400 text-sm sm:text-base">
                    <span>Subtotal</span>
                    <span id="cart-subtotal" class="font-medium">$0.00</span>
                </div>
                <div class="flex justify-between text-gray-400 text-sm sm:text-base">
                    <span>Shipping</span>
                    <span class="text-royal">Free</span>
                </div>
                <div class="flex justify-between text-gray-400 text-sm sm:text-base">
                    <span>Tax</span>
                    <span id="cart-tax" class="font-medium">$0.00</span>
                </div>
                <div class="flex justify-between text-xl sm:text-2xl font-bold border-t border-gray-800 pt-3">
                    <span>Total</span>
                    <span id="cart-total" class="text-royal">$0.00</span>
                </div>
            </div>
            
            <button onclick="checkoutWhatsApp()" class="w-full bg-gradient-to-r from-royal to-royal-dark text-black font-bold py-3 sm:py-4 rounded-full hover:from-royal-light hover:to-royal transition-all flex items-center justify-center gap-3 text-base sm:text-lg mb-3 shadow-lg shadow-royal/20 hover:shadow-royal/40 transform hover:scale-[1.02]">
                <i class="fab fa-whatsapp text-xl sm:text-2xl"></i>
                Checkout via WhatsApp
            </button>
            <button onclick="toggleCart()" class="w-full border border-gray-600 text-gray-300 font-medium py-3 rounded-full hover:bg-white/5 transition-all text-sm">
                Continue Shopping
            </button>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">
        <i class="fas fa-crown text-xl"></i>
        <span id="toast-message">Added to cart!</span>
    </div>

    <!-- TikTok Fullscreen Modal -->
    <div id="tiktok-modal" class="tiktok-modal" onclick="closeTikTokModal(event)">
        <button class="tiktok-modal-close" onclick="closeTikTokModal()" aria-label="Close video">
            <i class="fas fa-times"></i>
        </button>
        <div id="modal-video-container" class="w-full max-w-[400px] h-[70vh] sm:h-[720px] relative mx-4">
            <!-- Video injected here -->
        </div>
    </div>

    <!-- Hero -->
    <section class="relative min-h-[85vh] sm:min-h-[90vh] flex items-center justify-center overflow-hidden pt-16 sm:pt-20 bg-gradient-to-b from-dark-light to-dark">
        <div class="absolute inset-0">
            <div class="absolute top-20 left-4 sm:left-10 w-48 sm:w-96 h-48 sm:h-96 bg-royal/10 rounded-full blur-[80px] sm:blur-[120px] animate-pulse"></div>
            <div class="absolute bottom-20 right-4 sm:right-10 w-48 sm:w-96 h-48 sm:h-96 bg-tiktok/10 rounded-full blur-[80px] sm:blur-[120px] animate-pulse" style="animation-delay: 1s;"></div>
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[400px] sm:w-[800px] h-[400px] sm:h-[800px] border border-royal/5 rounded-full animate-[spin_20s_linear_infinite]"></div>
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[300px] sm:w-[600px] h-[300px] sm:h-[600px] border border-tiktok/10 rounded-full animate-[spin_15s_linear_infinite_reverse]"></div>
        </div>

        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="inline-flex items-center gap-2 bg-gradient-to-r from-tiktok/20 to-tiktok-pink/20 border border-tiktok/30 px-3 sm:px-4 py-2 rounded-full mb-6 sm:mb-8 hover:from-tiktok/30 hover:to-tiktok-pink/30 transition-all cursor-pointer" onclick="document.getElementById('products').scrollIntoView({behavior: 'smooth'})">
                <i class="fab fa-tiktok text-tiktok text-xs sm:text-sm"></i>
                <span class="text-xs font-bold tracking-wider uppercase tiktok-gradient-text">Powered by TikTok Videos</span>
            </div>
            
            <h1 class="font-display text-4xl sm:text-6xl md:text-7xl lg:text-8xl font-bold mb-4 sm:mb-6 leading-tight">
                Dress Like <br>
                <span class="text-gradient">Royalty</span>
            </h1>
            
            <p class="text-base sm:text-lg md:text-xl text-gray-400 max-w-2xl mx-auto mb-6 sm:mb-10 leading-relaxed px-4">
                Experience 55+ premium men's pieces with immersive <span class="tiktok-gradient-text font-bold">TikTok video previews</span>. 
                Royal quality, instant WhatsApp checkout.
            </p>
            
            <div class="flex flex-col sm:flex-row flex-wrap justify-center gap-3 sm:gap-4 px-4">
                <button onclick="document.getElementById('products').scrollIntoView({behavior: 'smooth'})" class="px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-tiktok to-tiktok-pink text-white font-bold rounded-full hover:scale-105 transition-all transform flex items-center justify-center gap-2 shadow-lg shadow-tiktok/25 text-sm sm:text-base">
                    <i class="fab fa-tiktok"></i> Watch on TikTok
                </button>
                <button onclick="showWhatsAppChat()" class="px-6 sm:px-8 py-3 sm:py-4 bg-white/10 text-white font-semibold rounded-full hover:bg-white/20 transition-all flex items-center justify-center gap-2 border border-royal/30 hover:border-royal text-sm sm:text-base">
                    <i class="fab fa-whatsapp text-royal"></i> Personal Stylist
                </button>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-8 mt-10 sm:mt-16 max-w-4xl mx-auto px-4">
                <div class="text-center glass rounded-xl sm:rounded-2xl p-3 sm:p-4 gold-border hover:scale-105 transition-transform cursor-pointer group">
                    <p class="font-display text-2xl sm:text-4xl font-bold text-royal group-hover:scale-110 transition-transform inline-block">55+</p>
                    <p class="text-xs sm:text-sm text-gray-500 mt-1">TikTok Videos</p>
                </div>
                <div class="text-center glass rounded-xl sm:rounded-2xl p-3 sm:p-4 gold-border hover:scale-105 transition-transform cursor-pointer group">
                    <p class="font-display text-2xl sm:text-4xl font-bold tiktok-gradient-text group-hover:scale-110 transition-transform inline-block">15s</p>
                    <p class="text-xs sm:text-sm text-gray-500 mt-1">Short Clips</p>
                </div>
                <div class="text-center glass rounded-xl sm:rounded-2xl p-3 sm:p-4 gold-border hover:scale-105 transition-transform cursor-pointer group">
                    <p class="font-display text-2xl sm:text-4xl font-bold text-white group-hover:text-royal transition-colors">24h</p>
                    <p class="text-xs sm:text-sm text-gray-500 mt-1">Dispatch</p>
                </div>
                <div class="text-center glass rounded-xl sm:rounded-2xl p-3 sm:p-4 gold-border hover:scale-105 transition-transform cursor-pointer group">
                    <p class="font-display text-2xl sm:text-4xl font-bold text-white group-hover:text-royal transition-colors">5</p>
                    <p class="text-xs sm:text-sm text-gray-500 mt-1">Categories</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="py-6 sm:py-8 bg-dark-lighter border-y border-royal/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 text-center">
                <div class="flex items-center justify-center gap-2 sm:gap-3 text-gray-300 group cursor-pointer hover:text-tiktok transition-colors">
                    <i class="fab fa-tiktok text-2xl sm:text-3xl text-tiktok group-hover:scale-110 transition-transform"></i>
                    <div class="text-left">
                        <p class="font-bold text-xs sm:text-sm">TikTok Videos</p>
                        <p class="text-xs text-gray-500 hidden sm:block">Authentic Content</p>
                    </div>
                </div>
                <div class="flex items-center justify-center gap-2 sm:gap-3 text-gray-300 group cursor-pointer hover:text-royal transition-colors">
                    <i class="fas fa-crown text-2xl sm:text-3xl text-royal group-hover:scale-110 transition-transform"></i>
                    <div class="text-left">
                        <p class="font-bold text-xs sm:text-sm">Premium Quality</p>
                        <p class="text-xs text-gray-500 hidden sm:block">Authentic Brands</p>
                    </div>
                </div>
                <div class="flex items-center justify-center gap-2 sm:gap-3 text-gray-300 group cursor-pointer hover:text-royal transition-colors">
                    <i class="fas fa-shipping-fast text-2xl sm:text-3xl text-royal group-hover:scale-110 transition-transform"></i>
                    <div class="text-left">
                        <p class="font-bold text-xs sm:text-sm">Free Shipping</p>
                        <p class="text-xs text-gray-500 hidden sm:block">Orders $200+</p>
                    </div>
                </div>
                <div class="flex items-center justify-center gap-2 sm:gap-3 text-gray-300 group cursor-pointer hover:text-royal transition-colors">
                    <i class="fab fa-whatsapp text-2xl sm:text-3xl text-royal group-hover:scale-110 transition-transform"></i>
                    <div class="text-left">
                        <p class="font-bold text-xs sm:text-sm">WhatsApp</p>
                        <p class="text-xs text-gray-500 hidden sm:block">Instant Checkout</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Category Pills -->
    <section class="py-4 sm:py-6 bg-dark border-b border-royal/10 sticky top-16 sm:top-20 z-40 transition-all" id="category-nav">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex overflow-x-auto gap-2 sm:gap-3 pb-2 scrollbar-hide">
                <button onclick="filterCategory('all')" class="category-pill active whitespace-nowrap px-4 sm:px-6 py-2 sm:py-3 rounded-full text-xs sm:text-sm font-bold transition-all" data-category="all">All Items</button>
                <button onclick="filterCategory('streetwear')" class="category-pill whitespace-nowrap px-4 sm:px-6 py-2 sm:py-3 rounded-full text-xs sm:text-sm font-bold transition-all text-gray-300" data-category="streetwear">üî• Streetwear</button>
                <button onclick="filterCategory('formal')" class="category-pill whitespace-nowrap px-4 sm:px-6 py-2 sm:py-3 rounded-full text-xs sm:text-sm font-bold transition-all text-gray-300" data-category="formal">üëî Formal</button>
                <button onclick="filterCategory('casual')" class="category-pill whitespace-nowrap px-4 sm:px-6 py-2 sm:py-3 rounded-full text-xs sm:text-sm font-bold transition-all text-gray-300" data-category="casual">üëï Casual</button>
                <button onclick="filterCategory('activewear')" class="category-pill whitespace-nowrap px-4 sm:px-6 py-2 sm:py-3 rounded-full text-xs sm:text-sm font-bold transition-all text-gray-300" data-category="activewear">üèÉ Activewear</button>
                <button onclick="filterCategory('outerwear')" class="category-pill whitespace-nowrap px-4 sm:px-6 py-2 sm:py-3 rounded-full text-xs sm:text-sm font-bold transition-all text-gray-300" data-category="outerwear">üß• Outerwear</button>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-10 sm:py-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto min-h-screen">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 sm:mb-8 gap-4 reveal">
            <div>
                <h2 class="font-display text-2xl sm:text-3xl font-bold flex items-center gap-2">
                    <i class="fab fa-tiktok text-tiktok text-xl sm:text-2xl"></i>
                    <span id="category-title">All Men's Collection</span>
                </h2>
                <p class="text-gray-400 mt-1 flex items-center gap-2 text-sm sm:text-base">
                    <i class="fas fa-video text-tiktok"></i>
                    <span id="category-count">Showing all items with TikTok videos</span>
                </p>
            </div>
            <div class="flex items-center gap-3 sm:gap-4 w-full md:w-auto">
                <div class="flex items-center gap-2 text-xs sm:text-sm text-gray-400 bg-dark-lighter px-3 sm:px-4 py-2 rounded-full border border-gray-800 flex-1 md:flex-none">
                    <i class="fas fa-sort text-royal"></i>
                    <select onchange="sortProducts(this.value)" class="bg-transparent border-none focus:outline-none text-white cursor-pointer w-full">
                        <option value="newest">Newest First</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="popular">Most Popular</option>
                    </select>
                </div>
                <div class="flex gap-2">
                    <button onclick="setView('grid')" class="p-2 rounded-lg bg-royal/20 text-royal hover:bg-royal hover:text-black transition-all" id="grid-view-btn">
                        <i class="fas fa-th-large"></i>
                    </button>
                    <button onclick="setView('list')" class="p-2 rounded-lg bg-dark-lighter text-gray-400 hover:bg-royal/20 hover:text-royal transition-all" id="list-view-btn">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="products-grid" class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-6">
            <!-- Injected by JS -->
        </div>

        <div id="no-results" class="hidden text-center py-12 sm:py-20">
            <i class="fas fa-search text-4xl sm:text-6xl text-gray-700 mb-4"></i>
            <p class="text-lg sm:text-xl text-gray-400">No products found</p>
            <button onclick="filterCategory('all'); document.getElementById('search-input').value=''" class="mt-4 text-royal hover:underline">Clear filters</button>
        </div>

        <div class="mt-10 sm:mt-16 text-center reveal">
            <button onclick="loadMoreProducts()" id="load-more-btn" class="px-6 sm:px-8 py-3 sm:py-4 bg-dark-lighter border-2 border-royal/30 rounded-full text-xs sm:text-sm font-bold hover:border-royal hover:text-royal transition-all flex items-center gap-2 mx-auto text-gray-300 hover:bg-royal/10">
                <i class="fas fa-spinner"></i> Load More
            </button>
        </div>
    </section>

    <!-- Size Guide -->
    <section class="py-16 sm:py-24 bg-dark-lighter border-y border-royal/10">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center reveal">
            <h2 class="font-display text-2xl sm:text-3xl font-bold mb-2 flex items-center justify-center gap-3">
                <i class="fas fa-ruler text-royal"></i>
                Royal Size Guide
            </h2>
            <p class="text-gray-400 mb-6 sm:mb-8 text-sm sm:text-base">Find your perfect fit with our comprehensive sizing chart</p>
            <div class="glass rounded-xl sm:rounded-2xl p-4 sm:p-8 gold-border overflow-x-auto">
                <table class="w-full text-left text-xs sm:text-sm">
                    <thead>
                        <tr class="border-b border-royal/20">
                            <th class="pb-3 sm:pb-4 font-bold text-royal">Size</th>
                            <th class="pb-3 sm:pb-4 font-bold text-gray-300">Chest (in)</th>
                            <th class="pb-3 sm:pb-4 font-bold text-gray-300">Waist (in)</th>
                            <th class="pb-3 sm:pb-4 font-bold text-gray-300">Length (in)</th>
                            <th class="pb-3 sm:pb-4 font-bold text-gray-300 hidden sm:table-cell">US Size</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-400">
                        <tr class="border-b border-gray-800 hover:bg-white/5 transition-colors"><td class="py-3 sm:py-4 font-bold text-white">XS</td><td>34-36</td><td>28-30</td><td>26</td><td class="hidden sm:table-cell">34</td></tr>
                        <tr class="border-b border-gray-800 hover:bg-white/5 transition-colors"><td class="py-3 sm:py-4 font-bold text-white">S</td><td>36-38</td><td>30-32</td><td>27</td><td class="hidden sm:table-cell">36</td></tr>
                        <tr class="border-b border-gray-800 hover:bg-white/5 transition-colors"><td class="py-3 sm:py-4 font-bold text-white">M</td><td>38-40</td><td>32-34</td><td>28</td><td class="hidden sm:table-cell">38-40</td></tr>
                        <tr class="border-b border-gray-800 hover:bg-white/5 transition-colors"><td class="py-3 sm:py-4 font-bold text-white">L</td><td>40-42</td><td>34-36</td><td>29</td><td class="hidden sm:table-cell">40-42</td></tr>
                        <tr class="border-b border-gray-800 hover:bg-white/5 transition-colors"><td class="py-3 sm:py-4 font-bold text-white">XL</td><td>42-44</td><td>36-38</td><td>30</td><td class="hidden sm:table-cell">42-44</td></tr>
                        <tr class="hover:bg-white/5 transition-colors"><td class="py-3 sm:py-4 font-bold text-white">XXL</td><td>44-46</td><td>38-40</td><td>31</td><td class="hidden sm:table-cell">44-46</td></tr>
                    </tbody>
                </table>
            </div>
            <p class="text-xs text-gray-500 mt-4">* Measurements may vary slightly by brand. When in doubt, size up for a relaxed fit.</p>
        </div>
    </section>

    <!-- WhatsApp Float -->
    <div class="whatsapp-float">
        <button onclick="showWhatsAppChat()" class="w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-r from-royal to-royal-dark rounded-full flex items-center justify-center text-black text-2xl sm:text-3xl shadow-2xl hover:scale-110 transition-transform border-4 border-dark group">
            <i class="fab fa-whatsapp group-hover:rotate-12 transition-transform"></i>
        </button>
    </div>

    <!-- Quick View Modal -->
    <div id="quick-view-modal" class="fixed inset-0 bg-black/90 z-[60] modal flex items-center justify-center p-0 sm:p-4 backdrop-blur-sm">
        <div class="bg-dark-light rounded-none sm:rounded-3xl max-w-5xl w-full max-h-[100vh] sm:max-h-[95vh] overflow-y-auto border-0 sm:border border-royal/20 shadow-2xl relative royal-glow">
            <button onclick="closeQuickView()" class="absolute top-2 right-2 sm:top-4 sm:right-4 z-10 w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-dark-lighter flex items-center justify-center hover:bg-royal hover:text-black transition-all text-lg sm:text-xl border border-gray-700">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-content" class="grid md:grid-cols-2 gap-0">
                <!-- Injected by JS -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark border-t border-royal/10 pt-12 sm:pt-16 pb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 sm:gap-12 mb-12">
                <div>
                    <span class="font-display text-2xl sm:text-3xl font-bold tracking-wider text-white mb-4 sm:mb-6 block flex items-center gap-2">
                        <i class="fas fa-crown text-royal crown-icon"></i>
                        ROYAL
                        <span class="text-xs sm:text-sm font-normal text-gray-500 ml-2">MEN</span>
                    </span>
                    <p class="text-gray-400 text-xs sm:text-sm leading-relaxed mb-4 sm:mb-6">
                        Premium men's fashion with immersive <span class="tiktok-gradient-text font-bold">TikTok video previews</span>. 
                        Royal quality, instant WhatsApp checkout.
                    </p>
                    <div class="flex space-x-3">
                        <a href="#" class="w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-dark-lighter flex items-center justify-center text-gray-400 hover:bg-tiktok hover:text-white transition-all border border-gray-700 hover:border-tiktok">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="#" class="w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-dark-lighter flex items-center justify-center text-gray-400 hover:bg-royal hover:text-black transition-all border border-gray-700 hover:border-royal">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-dark-lighter flex items-center justify-center text-gray-400 hover:bg-royal hover:text-black transition-all border border-gray-700 hover:border-royal">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>

                <div>
                    <h4 class="font-display font-bold text-base sm:text-lg mb-4 sm:mb-6 text-royal">Shop</h4>
                    <ul class="space-y-2 sm:space-y-3 text-xs sm:text-sm text-gray-400">
                        <li><a href="#" onclick="filterCategory('streetwear')" class="hover:text-royal transition-colors flex items-center gap-2"><i class="fas fa-fire text-xs"></i> Streetwear</a></li>
                        <li><a href="#" onclick="filterCategory('formal')" class="hover:text-royal transition-colors flex items-center gap-2"><i class="fas fa-user-tie text-xs"></i> Formal Wear</a></li>
                        <li><a href="#" onclick="filterCategory('casual')" class="hover:text-royal transition-colors flex items-center gap-2"><i class="fas fa-tshirt text-xs"></i> Casual</a></li>
                        <li><a href="#" onclick="filterCategory('activewear')" class="hover:text-royal transition-colors flex items-center gap-2"><i class="fas fa-running text-xs"></i> Activewear</a></li>
                        <li><a href="#" onclick="filterCategory('outerwear')" class="hover:text-royal transition-colors flex items-center gap-2"><i class="fas fa-snowflake text-xs"></i> Outerwear</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-display font-bold text-base sm:text-lg mb-4 sm:mb-6 text-royal">Help</h4>
                    <ul class="space-y-2 sm:space-y-3 text-xs sm:text-sm text-gray-400">
                        <li><a href="#" onclick="document.querySelector('.bg-dark-lighter').scrollIntoView({behavior: 'smooth'})" class="hover:text-royal transition-colors">Size Guide</a></li>
                        <li><a href="#" class="hover:text-royal transition-colors">Shipping Info</a></li>
                        <li><a href="#" class="hover:text-royal transition-colors">Returns & Exchanges</a></li>
                        <li><a href="#" class="hover:text-royal transition-colors">Track Order</a></li>
                        <li><a href="#" class="hover:text-royal transition-colors">FAQ</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-display font-bold text-base sm:text-lg mb-4 sm:mb-6 text-royal">Contact</h4>
                    <ul class="space-y-2 sm:space-y-3 text-xs sm:text-sm text-gray-400">
                        <li class="flex items-center gap-3 hover:text-royal transition-colors cursor-pointer" onclick="showWhatsAppChat()">
                            <i class="fab fa-whatsapp text-royal text-base sm:text-lg"></i>
                            <span>+254704918499</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-envelope text-royal text-base sm:text-lg"></i>
                            <span>king@royalfashion.com</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-crown text-royal text-base sm:text-lg"></i>
                            <span>24/7 Royal Support</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-map-marker-alt text-royal text-base sm:text-lg"></i>
                            <span>Nairobi, Kenya</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-gray-800 pt-6 sm:pt-8 flex flex-col sm:flex-row justify-between items-center gap-4">
                <p class="text-xs sm:text-sm text-gray-500 text-center sm:text-left">¬© 2024 ROYAL Men. All rights reserved. Crafted with <i class="fas fa-heart text-red-500 mx-1"></i> in Kenya</p>
                <div class="flex items-center gap-3 sm:gap-4 text-xl sm:text-2xl text-gray-600">
                    <i class="fab fa-cc-visa hover:text-royal transition-colors"></i>
                    <i class="fab fa-cc-mastercard hover:text-royal transition-colors"></i>
                    <i class="fab fa-cc-amex hover:text-royal transition-colors"></i>
                    <i class="fab fa-cc-paypal hover:text-royal transition-colors"></i>
                    <i class="fab fa-cc-apple-pay hover:text-royal transition-colors"></i>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Product Database
        const products = [
            {
                id: 1,
                name: "Off-White Diagonal Hoodie",
                brand: "Off-White",
                price: 890,
                originalPrice: 1100,
                category: "streetwear",
                subcategory: "Hoodies",
                image: "https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=800&q=80",
                tiktokVideoId: "7612046437991370004",
                tiktokUsername: "royalfashion_official",
                badge: "BESTSELLER",
                description: "Iconic diagonal stripe design with signature arrows motif. Heavyweight cotton fleece construction.",
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["Black", "White", "Grey"],
                stock: 15,
                popularity: 98,
                videoDuration: "0:15"
            },
            {
                id: 2,
                name: "Supreme Box Logo Tee",
                brand: "Supreme",
                price: 355,
                originalPrice: 500,
                category: "streetwear",
                subcategory: "T-Shirts",
                image: "https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=800&q=80",
                tiktokVideoId: "6830059644233223429",
                tiktokUsername: "royalfashion_official",
                badge: "SALE",
                description: "Classic box logo t-shirt in heavyweight cotton. Limited edition colorway.",
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["Red", "Black", "White"],
                stock: 8,
                popularity: 95,
                videoDuration: "0:12"
            },
            {
                id: 3,
                name: "BAPE Shark Full Zip Hoodie",
                brand: "BAPE",
                price: 750,
                category: "streetwear",
                subcategory: "Hoodies",
                image: "https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?w=800&q=80",
                tiktokVideoId: "6901234567890123456",
                tiktokUsername: "royalfashion_official",
                badge: "LIMITED",
                description: "Iconic shark face design with WGM lettering. Camo pattern throughout.",
                sizes: ["M", "L", "XL"],
                colors: ["Green Camo", "Blue Camo", "Purple Camo"],
                stock: 3,
                popularity: 92,
                videoDuration: "0:18"
            },
            {
                id: 4,
                name: "Nike Tech Fleece Joggers",
                brand: "Nike",
                price: 120,
                originalPrice: 150,
                category: "streetwear",
                subcategory: "Pants",
                image: "https://images.unsplash.com/photo-1517438476312-10d79c077509?w=800&q=80",
                tiktokVideoId: "6912345678901234567",
                tiktokUsername: "royalfashion_official",
                badge: null,
                description: "Premium tech fleece material with tapered fit. Perfect for streetwear looks.",
                sizes: ["S", "M", "L", "XL", "XXL"],
                colors: ["Black", "Grey", "Olive"],
                stock: 25,
                popularity: 88,
                videoDuration: "0:10"
            },
            {
                id: 5,
                name: "Travis Scott x Jordan Hoodie",
                brand: "Jordan",
                price: 450,
                category: "streetwear",
                subcategory: "Hoodies",
                image: "https://images.unsplash.com/photo-1556906781-9a412961c28c?w=800&q=80",
                tiktokVideoId: "6923456789012345678",
                tiktokUsername: "royalfashion_official",
                badge: "NEW",
                description: "Collaboration piece with Cactus Jack branding. Oversized fit.",
                sizes: ["M", "L", "XL"],
                colors: ["Brown", "Black"],
                stock: 12,
                popularity: 96,
                videoDuration: "0:20"
            },
            {
                id: 16,
                name: "Hugo Boss Slim Fit Suit",
                brand: "Hugo Boss",
                price: 895,
                originalPrice: 1200,
                category: "formal",
                subcategory: "Suits",
                image: "https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=800&q=80",
                tiktokVideoId: "7101234567890123456",
                tiktokUsername: "royalfashion_official",
                badge: "BESTSELLER",
                description: "Italian wool slim fit suit with peak lapels. Perfect for business or formal events.",
                sizes: ["36R", "38R", "40R", "42R", "44R"],
                colors: ["Navy", "Charcoal", "Black"],
                stock: 8,
                popularity: 94,
                videoDuration: "0:25"
            }
        ];

        let cart = [];
        let wishlist = [];
        let currentCategory = 'all';
        let currentSort = 'newest';
        let currentView = 'grid';
        let selectedColors = {};
        let loadedVideos = new Set();
        let videoIntersectionObserver = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initVideoIntersectionObserver();
            renderProducts();
            initScrollReveal();
            updateCategoryTitle();
            initStickyNav();
            loadFromLocalStorage();
        });

        function initVideoIntersectionObserver() {
            const options = { root: null, rootMargin: '100px', threshold: 0.1 };
            videoIntersectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-viewport');
                    }
                });
            }, options);
        }

        function loadFromLocalStorage() {
            const savedCart = localStorage.getItem('royalCart');
            const savedWishlist = localStorage.getItem('royalWishlist');
            if (savedCart) { cart = JSON.parse(savedCart); updateCartUI(); }
            if (savedWishlist) { wishlist = JSON.parse(savedWishlist); updateWishlistUI(); }
        }

        function saveToLocalStorage() {
            localStorage.setItem('royalCart', JSON.stringify(cart));
            localStorage.setItem('royalWishlist', JSON.stringify(wishlist));
        }

        function getTikTokEmbedUrl(videoId, username, autoplay = false) {
            const params = new URLSearchParams({ rel: '0', description: '1', autoplay: autoplay ? '1' : '0', loop: '1', music_info: '1', language: 'en' });
            return `https://www.tiktok.com/player/v1/${videoId}?${params.toString()}`;
        }

        function renderProducts(filter = 'all', searchTerm = '') {
            const grid = document.getElementById('products-grid');
            const noResults = document.getElementById('no-results');
            let filtered = products;

            if (filter !== 'all') filtered = filtered.filter(p => p.category === filter);
            if (searchTerm) filtered = filtered.filter(p => p.name.toLowerCase().includes(searchTerm.toLowerCase()) || p.brand.toLowerCase().includes(searchTerm.toLowerCase()) || p.subcategory.toLowerCase().includes(searchTerm.toLowerCase()));

            if (currentSort === 'price-low') filtered.sort((a, b) => a.price - b.price);
            else if (currentSort === 'price-high') filtered.sort((a, b) => b.price - a.price);
            else if (currentSort === 'popular') filtered.sort((a, b) => b.popularity - a.popularity);

            if (filtered.length === 0) {
                grid.innerHTML = '';
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
                if (currentView === 'grid') {
                    grid.className = 'grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-6';
                    grid.innerHTML = filtered.map(product => createProductCard(product)).join('');
                } else {
                    grid.className = 'flex flex-col gap-4';
                    grid.innerHTML = filtered.map(product => createProductListItem(product)).join('');
                }
            }

            document.getElementById('category-count').textContent = `Showing ${filtered.length} items with TikTok videos`;
            setTimeout(() => {
                document.querySelectorAll('#products-grid .reveal').forEach(el => el.classList.add('active'));
                initLazyLoading();
                observeVideoContainers();
            }, 100);
        }

        function createProductCard(product) {
            const isWishlisted = wishlist.includes(product.id);
            const stockStatus = getStockStatus(product.stock);
            
            return `
                <div class="product-card reveal group" data-product-id="${product.id}">
                    <div class="product-media-container mb-3 sm:mb-4 gold-border relative" id="media-${product.id}" data-product-id="${product.id}">
                        ${product.badge ? `<div class="product-badge ${product.badge === 'SALE' ? 'sale' : ''} ${product.badge === 'LIMITED' ? 'limited' : ''} ${product.badge === 'NEW' ? 'new' : ''}">${product.badge}</div>` : ''}
                        <div class="tiktok-badge"><i class="fab fa-tiktok"></i></div>
                        <button onclick="event.stopPropagation(); toggleWishlistItem(${product.id})" class="wishlist-btn ${isWishlisted ? 'active' : ''}" title="${isWishlisted ? 'Remove from Wishlist' : 'Add to Wishlist'}">
                            <i class="fas fa-heart ${isWishlisted ? '' : 'text-white'}"></i>
                        </button>
                        <button onclick="event.stopPropagation(); addToCart(${product.id})" class="quick-add-btn" title="Quick Add">
                            <i class="fas fa-plus"></i>
                        </button>
                        <img src="${product.image}" alt="${product.name}" class="product-poster img-loading" id="poster-${product.id}" onload="this.classList.remove('img-loading'); this.classList.add('img-loaded')">
                        <div class="video-wrapper" id="video-wrapper-${product.id}"></div>
                        <div class="video-loading" id="loading-${product.id}"><div class="loading-spinner"></div></div>
                        <button onclick="event.stopPropagation(); loadAndPlayVideo(${product.id})" class="video-facade-btn" id="play-btn-${product.id}" title="Click to play TikTok video">
                            <i class="fab fa-tiktok"></i>
                        </button>
                        <div class="video-duration">
                            <i class="fas fa-clock text-xs"></i>
                            <span>${product.videoDuration || '0:15'}</span>
                        </div>
                        <div class="product-actions">
                            <button onclick="openQuickView(${product.id})" class="action-btn action-btn-secondary text-xs sm:text-sm">
                                <i class="fas fa-eye"></i> <span class="hidden sm:inline">View</span>
                            </button>
                            <button onclick="addToCart(${product.id})" class="action-btn action-btn-primary text-xs sm:text-sm">
                                <i class="fas fa-shopping-bag"></i> <span class="hidden sm:inline">Add</span>
                            </button>
                        </div>
                    </div>
                    <div class="space-y-1 sm:space-y-2 px-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-xs text-royal font-bold uppercase tracking-wider">${product.brand}</p>
                                <p class="text-xs text-gray-500 hidden sm:block">${product.subcategory}</p>
                            </div>
                            <div class="flex items-center gap-1 bg-royal/10 px-2 py-1 rounded-full border border-royal/20">
                                <i class="fas fa-crown text-royal text-xs"></i>
                                <span class="text-xs font-bold text-royal">${product.popularity}%</span>
                            </div>
                        </div>
                        <h3 class="font-display text-sm sm:text-lg font-bold text-white leading-tight cursor-pointer hover:text-royal transition-colors line-clamp-2" onclick="openQuickView(${product.id})">
                            ${product.name}
                        </h3>
                        <div class="flex items-center gap-2">
                            <span class="text-lg sm:text-2xl font-bold text-royal price-tag">$${product.price}</span>
                            ${product.originalPrice ? `<span class="text-xs sm:text-sm text-gray-500 line-through">$${product.originalPrice}</span>` : ''}
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="stock-status ${stockStatus.class} text-xs">
                                <i class="fas fa-circle text-[6px] sm:text-[8px]"></i>
                                <span>${stockStatus.text}</span>
                            </div>
                            ${product.colors ? `
                            <div class="flex gap-1">
                                ${product.colors.slice(0, 3).map(color => `
                                    <div class="w-3 h-3 sm:w-4 sm:h-4 rounded-full border border-gray-600" style="background: ${getColorCode(color)}" title="${color}"></div>
                                `).join('')}
                                ${product.colors.length > 3 ? `<span class="text-xs text-gray-500">+${product.colors.length - 3}</span>` : ''}
                            </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        function createProductListItem(product) {
            const isWishlisted = wishlist.includes(product.id);
            return `
                <div class="product-card reveal flex gap-3 sm:gap-6 bg-dark-lighter p-3 sm:p-4 rounded-xl sm:rounded-2xl gold-border">
                    <div class="w-32 sm:w-48 h-32 sm:h-48 flex-shrink-0 relative rounded-lg sm:rounded-xl overflow-hidden" data-product-id="${product.id}">
                        ${product.badge ? `<div class="product-badge ${product.badge === 'SALE' ? 'sale' : ''} ${product.badge === 'LIMITED' ? 'limited' : ''} text-xs px-2 py-1">${product.badge}</div>` : ''}
                        <img src="${product.image}" alt="${product.name}" class="product-poster w-full h-full object-cover">
                        <div class="video-wrapper" id="video-wrapper-list-${product.id}"></div>
                        <button onclick="loadAndPlayVideo(${product.id}, true)" class="video-facade-btn w-12 h-12 sm:w-16 sm:h-16 text-lg sm:text-2xl">
                            <i class="fab fa-tiktok"></i>
                        </button>
                    </div>
                    <div class="flex-1 flex flex-col justify-between min-w-0">
                        <div>
                            <div class="flex justify-between items-start mb-1 sm:mb-2">
                                <div class="min-w-0 pr-2">
                                    <p class="text-xs text-royal font-bold uppercase tracking-wider">${product.brand}</p>
                                    <h3 class="font-display text-base sm:text-xl font-bold text-white hover:text-royal transition-colors cursor-pointer line-clamp-2" onclick="openQuickView(${product.id})">${product.name}</h3>
                                </div>
                                <button onclick="toggleWishlistItem(${product.id})" class="text-xl sm:text-2xl ${isWishlisted ? 'text-red-500' : 'text-gray-600'} hover:scale-110 transition-transform flex-shrink-0">
                                    <i class="fas fa-heart"></i>
                                </button>
                            </div>
                            <p class="text-gray-400 text-xs sm:text-sm mb-2 sm:mb-4 line-clamp-2">${product.description}</p>
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xl sm:text-2xl font-bold text-royal">$${product.price}</span>
                                ${product.originalPrice ? `<span class="text-gray-500 line-through text-sm">$${product.originalPrice}</span>` : ''}
                            </div>
                            <div class="flex flex-wrap gap-1 sm:gap-2">
                                ${product.sizes.map(size => `<span class="px-2 py-1 bg-dark rounded text-xs border border-gray-700">${size}</span>`).join('')}
                            </div>
                        </div>
                        <div class="flex gap-2 sm:gap-3 mt-3 sm:mt-4">
                            <button onclick="openQuickView(${product.id})" class="px-4 sm:px-6 py-2 border border-royal/30 rounded-full text-xs sm:text-sm font-bold hover:bg-royal/10 transition-colors">
                                <i class="fas fa-eye mr-1 sm:mr-2"></i>View
                            </button>
                            <button onclick="addToCart(${product.id})" class="flex-1 px-4 sm:px-6 py-2 bg-gradient-to-r from-royal to-royal-dark text-black rounded-full text-xs sm:text-sm font-bold hover:from-royal-light hover:to-royal transition-all">
                                <i class="fas fa-shopping-bag mr-1 sm:mr-2"></i>Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function observeVideoContainers() {
            document.querySelectorAll('.product-media-container[data-product-id]').forEach(container => {
                videoIntersectionObserver.observe(container);
            });
        }

        function loadAndPlayVideo(productId, isListView = false) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const wrapperId = isListView ? `video-wrapper-list-${productId}` : `video-wrapper-${productId}`;
            const wrapper = document.getElementById(wrapperId);
            const playBtn = document.getElementById(`play-btn-${productId}`);
            const loading = document.getElementById(`loading-${productId}`);
            const poster = document.getElementById(`poster-${productId}`);

            if (!wrapper || loadedVideos.has(productId)) return;

            if (loading) loading.classList.add('active');
            if (playBtn) playBtn.classList.add('playing');

            const iframe = document.createElement('iframe');
            iframe.className = 'tiktok-iframe';
            iframe.allow = 'fullscreen; autoplay; clipboard-write; encrypted-media; picture-in-picture';
            iframe.setAttribute('loading', 'lazy');
            iframe.title = `${product.name} TikTok Video`;
            iframe.src = getTikTokEmbedUrl(product.tiktokVideoId, product.tiktokUsername, true);
            
            iframe.onload = () => {
                loadedVideos.add(productId);
                if (loading) loading.classList.remove('active');
                wrapper.classList.add('active');
                if (poster) poster.style.opacity = '0';
            };

            iframe.onerror = () => {
                if (loading) loading.classList.remove('active');
                if (playBtn) playBtn.classList.remove('playing');
                showToast('Video unavailable', 'exclamation-circle');
            };

            wrapper.innerHTML = '';
            wrapper.appendChild(iframe);

            setTimeout(() => {
                if (!loadedVideos.has(productId) && loading) loading.classList.remove('active');
            }, 10000);
        }

        function getStockStatus(stock) {
            if (stock === 0) return { class: 'out', text: 'Out of Stock' };
            if (stock <= 5) return { class: 'low', text: `${stock} left` };
            if (stock <= 10) return { class: 'low', text: 'Low Stock' };
            return { class: '', text: 'In Stock' };
        }

        function getColorCode(colorName) {
            const colors = { 'Black': '#000000', 'White': '#FFFFFF', 'Grey': '#808080', 'Navy': '#000080', 'Red': '#FF0000', 'Blue': '#0000FF', 'Green': '#008000', 'Olive': '#808000', 'Brown': '#8B4513', 'Beige': '#F5F5DC', 'Khaki': '#C3B091', 'Pink': '#FFC0CB', 'Yellow': '#FFFF00', 'Orange': '#FFA500', 'Purple': '#800080', 'Camo': '#4B5320', 'Green Camo': '#4B5320', 'Blue Camo': '#1e3a5f', 'Purple Camo': '#4a1c6f' };
            return colors[colorName] || '#888888';
        }

        function initLazyLoading() {
            const images = document.querySelectorAll('.product-poster');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        if (img.dataset.src) { img.src = img.dataset.src; img.removeAttribute('data-src'); }
                        observer.unobserve(img);
                    }
                });
            }, { rootMargin: '50px' });
            images.forEach(img => imageObserver.observe(img));
        }

        function filterCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.category-pill').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.category === category);
                if (btn.dataset.category === category) btn.classList.remove('text-gray-300');
                else btn.classList.add('text-gray-300');
            });
            renderProducts(category);
            updateCategoryTitle();
            document.getElementById('products').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function updateCategoryTitle() {
            const titles = { 'all': 'All Men\'s Collection', 'streetwear': 'Royal Streetwear', 'formal': 'Royal Formal Wear', 'casual': 'Royal Casual Wear', 'activewear': 'Royal Activewear', 'outerwear': 'Royal Outerwear' };
            document.getElementById('category-title').textContent = titles[currentCategory] || titles['all'];
        }

        function sortProducts(sortType) {
            currentSort = sortType;
            renderProducts(currentCategory, document.getElementById('search-input').value);
        }

        function setView(view) {
            currentView = view;
            document.getElementById('grid-view-btn').classList.toggle('bg-royal/20', view === 'grid');
            document.getElementById('grid-view-btn').classList.toggle('text-royal', view === 'grid');
            document.getElementById('list-view-btn').classList.toggle('bg-royal/20', view === 'list');
            document.getElementById('list-view-btn').classList.toggle('text-royal', view === 'list');
            renderProducts(currentCategory, document.getElementById('search-input').value);
        }

        function filterProducts() {
            renderProducts(currentCategory, document.getElementById('search-input').value);
        }

        function toggleSearch() {
            const bar = document.getElementById('search-bar');
            bar.classList.toggle('hidden');
            if (!bar.classList.contains('hidden')) document.getElementById('search-input').focus();
        }

        function toggleWishlist() {
            const sidebar = document.getElementById('wishlist-sidebar');
            const overlay = document.getElementById('wishlist-overlay');
            const isOpen = sidebar.classList.contains('open');
            if (isOpen) {
                sidebar.classList.remove('open');
                overlay.classList.add('hidden');
                document.body.style.overflow = '';
            } else {
                sidebar.classList.add('open');
                overlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                updateWishlistUI();
            }
        }

        function toggleWishlistItem(productId) {
            const index = wishlist.indexOf(productId);
            if (index > -1) {
                wishlist.splice(index, 1);
                showToast('Removed from wishlist', 'heart-broken');
            } else {
                wishlist.push(productId);
                showToast('Added to wishlist!', 'heart');
            }
            saveToLocalStorage();
            updateWishlistUI();
            renderProducts(currentCategory, document.getElementById('search-input').value);
        }

        function updateWishlistUI() {
            const count = document.getElementById('wishlist-count');
            const totalItems = document.getElementById('wishlist-total-items');
            const items = document.getElementById('wishlist-items');

            count.textContent = wishlist.length;
            count.classList.toggle('scale-0', wishlist.length === 0);
            count.classList.toggle('scale-100', wishlist.length > 0);
            totalItems.textContent = wishlist.length;

            if (wishlist.length === 0) {
                items.innerHTML = `
                    <div class="text-center text-gray-500 py-12">
                        <i class="fas fa-heart text-5xl sm:text-6xl mb-4 opacity-20"></i>
                        <p class="text-base sm:text-lg mb-2">Your wishlist is empty</p>
                        <button onclick="toggleWishlist(); document.getElementById('products').scrollIntoView({behavior: 'smooth'})" class="text-royal hover:underline font-medium">Start Shopping</button>
                    </div>
                `;
            } else {
                const wishlistProducts = products.filter(p => wishlist.includes(p.id));
                items.innerHTML = wishlistProducts.map(item => `
                    <div class="cart-item flex gap-3 sm:gap-4 bg-dark rounded-xl p-3 sm:p-4 border border-gray-800">
                        <img src="${item.image}" alt="${item.name}" class="w-20 sm:w-24 h-20 sm:h-24 object-cover rounded-lg border border-gray-700">
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-start mb-1">
                                <div>
                                    <p class="text-xs text-royal font-bold">${item.brand}</p>
                                    <h4 class="font-bold text-sm truncate pr-2">${item.name}</h4>
                                </div>
                                <button onclick="toggleWishlistItem(${item.id})" class="text-gray-500 hover:text-red-500 transition-colors p-1">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                            <p class="text-royal font-bold mb-2 sm:mb-3">$${item.price}</p>
                            <button onclick="addToCart(${item.id}); toggleWishlistItem(${item.id})" class="w-full py-2 bg-royal/20 text-royal rounded-lg text-xs sm:text-sm font-bold hover:bg-royal hover:text-black transition-all">
                                <i class="fas fa-shopping-bag mr-2"></i>Move to Cart
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existing = cart.find(item => item.id === productId);
            const selectedColor = selectedColors[productId] || (product.colors ? product.colors[0] : null);

            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ ...product, quantity: 1, selectedSize: product.sizes[0], selectedColor: selectedColor });
            }

            saveToLocalStorage();
            updateCartUI();
            showToast('Added to cart!');
            
            const cartIcon = document.querySelector('.fa-shopping-bag').parentElement;
            cartIcon.classList.add('animate-bounce');
            setTimeout(() => cartIcon.classList.remove('animate-bounce'), 1000);
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveToLocalStorage();
            updateCartUI();
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) removeFromCart(productId);
                else { saveToLocalStorage(); updateCartUI(); }
            }
        }

        function updateSize(productId, size) {
            const item = cart.find(item => item.id === productId);
            if (item) { item.selectedSize = size; saveToLocalStorage(); }
        }

        function updateCartUI() {
            const count = document.getElementById('cart-count');
            const totalItems = document.getElementById('cart-total-items');
            const items = document.getElementById('cart-items');
            const subtotal = document.getElementById('cart-subtotal');
            const tax = document.getElementById('cart-tax');
            const total = document.getElementById('cart-total');

            const totalQty = cart.reduce((sum, item) => sum + item.quantity, 0);
            const subtotalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const taxPrice = subtotalPrice * 0.08;
            const totalPrice = subtotalPrice + taxPrice;

            count.textContent = totalQty;
            count.classList.toggle('scale-0', totalQty === 0);
            count.classList.toggle('scale-100', totalQty > 0);
            totalItems.textContent = totalQty;

            if (cart.length === 0) {
                items.innerHTML = `
                    <div class="text-center text-gray-500 py-12">
                        <i class="fas fa-crown text-5xl sm:text-6xl mb-4 opacity-20"></i>
                        <p class="text-base sm:text-lg mb-2">Your cart is empty</p>
                        <button onclick="toggleCart(); document.getElementById('products').scrollIntoView({behavior: 'smooth'})" class="text-royal hover:underline font-medium">Start Shopping</button>
                    </div>
                `;
            } else {
                items.innerHTML = cart.map(item => `
                    <div class="cart-item flex gap-3 sm:gap-4 bg-dark rounded-xl p-3 sm:p-4 border border-gray-800 hover:border-royal/30 transition-colors">
                        <img src="${item.image}" alt="${item.name}" class="w-20 sm:w-24 h-20 sm:h-24 object-cover rounded-lg border border-gray-700">
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-start mb-1">
                                <div>
                                    <p class="text-xs text-royal font-bold">${item.brand}</p>
                                    <h4 class="font-bold text-sm truncate pr-2">${item.name}</h4>
                                    ${item.selectedColor ? `<span class="text-xs text-gray-500">Color: ${item.selectedColor}</span>` : ''}
                                </div>
                                <button onclick="removeFromCart(${item.id})" class="text-gray-500 hover:text-red-500 transition-colors p-1">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs text-gray-400">Size:</span>
                                <select onchange="updateSize(${item.id}, this.value)" class="bg-dark-lighter border border-gray-700 rounded text-xs px-2 py-1 focus:border-royal outline-none">
                                    ${item.sizes.map(size => `<option value="${size}" ${size === item.selectedSize ? 'selected' : ''}>${size}</option>`).join('')}
                                </select>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="flex items-center gap-1 bg-dark-lighter rounded-lg p-1">
                                    <button onclick="updateQuantity(${item.id}, -1)" class="qty-btn text-gray-400 hover:text-black text-xs sm:text-sm w-7 h-7 sm:w-9 sm:h-9">-</button>
                                    <span class="w-6 sm:w-8 text-center font-bold text-sm">${item.quantity}</span>
                                    <button onclick="updateQuantity(${item.id}, 1)" class="qty-btn text-gray-400 hover:text-black text-xs sm:text-sm w-7 h-7 sm:w-9 sm:h-9">+</button>
                                </div>
                                <p class="font-bold text-royal text-base sm:text-lg">$${(item.price * item.quantity).toLocaleString()}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            subtotal.textContent = `$${subtotalPrice.toLocaleString()}.00`;
            tax.textContent = `$${taxPrice.toLocaleString()}.00`;
            total.textContent = `$${totalPrice.toLocaleString()}.00`;
        }

        function toggleCart() {
            const sidebar = document.getElementById('cart-sidebar');
            const overlay = document.getElementById('cart-overlay');
            const isOpen = sidebar.classList.contains('open');
            if (isOpen) {
                sidebar.classList.remove('open');
                overlay.classList.add('hidden');
                document.body.style.overflow = '';
            } else {
                sidebar.classList.add('open');
                overlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                updateCartUI();
            }
        }

        function checkoutWhatsApp() {
            if (cart.length === 0) { showToast('Your cart is empty!', 'exclamation-circle'); return; }

            const phone = '+254704918499';
            let message = `üëë *ROYAL MEN'S ORDER*%0A%0A`;
            cart.forEach((item, i) => {
                message += `*${i + 1}. ${item.name}*%0A`;
                message += `   Brand: ${item.brand}%0A`;
                message += `   Category: ${item.category}%0A`;
                message += `   Size: ${item.selectedSize}%0A`;
                if (item.selectedColor) message += `   Color: ${item.selectedColor}%0A`;
                message += `   Qty: ${item.quantity}%0A`;
                message += `   Price: $${(item.price * item.quantity).toLocaleString()}%0A%0A`;
            });

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = total * 0.08;
            message += `*Subtotal: $${total.toLocaleString()}*%0A`;
            message += `*Tax (8%): $${tax.toLocaleString()}*%0A`;
            message += `*TOTAL: $${(total + tax).toLocaleString()}*%0A%0A`;
            message += `Please confirm availability. üëë`;

            window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
        }

        function showWhatsAppChat() {
            window.open(`https://wa.me/+254704918499?text=üëë Hi! I'm looking for royal fashion advice.`, '_blank');
        }

        function openQuickView(productId) {
            const product = products.find(p => p.id === productId);
            const modal = document.getElementById('quick-view-modal');
            const content = document.getElementById('modal-content');
            const isWishlisted = wishlist.includes(productId);

            content.innerHTML = `
                <div class="h-[250px] sm:h-[300px] md:h-[600px] bg-dark-lighter relative">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" id="modal-poster">
                    <div class="video-wrapper" id="modal-video-wrapper"></div>
                    <button onclick="loadModalVideo(${product.id})" class="video-facade-btn" id="modal-play-btn" style="opacity: 1; transform: translate(-50%, -50%) scale(1);">
                        <i class="fab fa-tiktok"></i>
                    </button>
                    <div class="absolute bottom-4 right-4 bg-black/80 text-tiktok px-3 py-1 rounded-full text-xs sm:text-sm font-bold border border-tiktok/30">
                        <i class="fab fa-tiktok mr-1"></i> TikTok Video
                    </div>
                    <button onclick="toggleWishlistItem(${product.id}); openQuickView(${product.id})" class="absolute top-4 right-4 w-10 h-10 sm:w-12 sm:h-12 rounded-full ${isWishlisted ? 'bg-red-500' : 'bg-black/50'} flex items-center justify-center text-white hover:scale-110 transition-transform backdrop-blur-sm">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
                <div class="p-6 sm:p-8 md:p-12 space-y-4 sm:space-y-6 overflow-y-auto max-h-[400px] sm:max-h-[600px]">
                    <div>
                        <div class="flex items-center gap-2 sm:gap-3 mb-2 flex-wrap">
                            <span class="text-royal font-bold tracking-wider uppercase text-xs sm:text-sm">${product.brand}</span>
                            <span class="text-gray-500 text-xs sm:text-sm">‚Ä¢ ${product.subcategory}</span>
                            ${product.badge ? `<span class="bg-royal/20 text-royal text-xs font-bold px-2 sm:px-3 py-1 rounded-full border border-royal/30">${product.badge}</span>` : ''}
                        </div>
                        <h2 class="font-display text-2xl sm:text-3xl md:text-4xl font-bold mb-3 sm:mb-4 leading-tight">${product.name}</h2>
                        <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6 flex-wrap">
                            <span class="text-3xl sm:text-4xl font-bold text-royal">$${product.price}</span>
                            ${product.originalPrice ? `<span class="text-xl sm:text-2xl text-gray-500 line-through">$${product.originalPrice}</span>` : ''}
                            <div class="stock-status ${getStockStatus(product.stock).class} ml-auto text-xs sm:text-sm">
                                <i class="fas fa-circle text-[6px] sm:text-[8px]"></i>
                                <span>${getStockStatus(product.stock).text}</span>
                            </div>
                        </div>
                        <p class="text-gray-400 leading-relaxed text-base sm:text-lg">${product.description}</p>
                    </div>

                    ${product.colors ? `
                    <div>
                        <p class="font-bold mb-2 sm:mb-3 text-xs sm:text-sm uppercase tracking-wider text-gray-400">Select Color</p>
                        <div class="flex gap-2 sm:gap-3">
                            ${product.colors.map((color, i) => `
                                <button onclick="selectColor(${product.id}, '${color}', this)" class="color-swatch ${i === 0 ? 'selected' : ''}" style="background: ${getColorCode(color)}" title="${color}"></button>
                            `).join('')}
                        </div>
                        <p class="text-xs sm:text-sm text-gray-500 mt-2" id="selected-color-text">Selected: ${product.colors[0]}</p>
                    </div>
                    ` : ''}

                    <div>
                        <p class="font-bold mb-2 sm:mb-3 text-xs sm:text-sm uppercase tracking-wider text-gray-400">Select Size</p>
                        <div class="flex flex-wrap gap-2 sm:gap-3">
                            ${product.sizes.map((size, i) => `
                                <button onclick="selectSize(this)" class="size-btn w-12 h-12 sm:w-14 sm:h-14 rounded-xl font-bold text-sm sm:text-base hover:border-royal ${i === 0 ? 'selected' : ''}">${size}</button>
                            `).join('')}
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 pt-2 sm:pt-4">
                        <button onclick="addToCartFromModal(${product.id}); closeQuickView();" class="flex-1 bg-gradient-to-r from-royal to-royal-dark text-black font-bold py-3 sm:py-4 rounded-full hover:from-royal-light hover:to-royal transition-all flex items-center justify-center gap-2 text-base sm:text-lg shadow-lg shadow-royal/20 hover:shadow-royal/40 transform hover:scale-[1.02]">
                            <i class="fas fa-shopping-bag"></i> Add to Cart
                        </button>
                        <button onclick="buyNow(${product.id})" class="flex-1 border-2 border-royal text-royal font-bold py-3 sm:py-4 rounded-full hover:bg-royal hover:text-black transition-all flex items-center justify-center gap-2 text-base sm:text-lg">
                            <i class="fab fa-whatsapp"></i> Buy Now
                        </button>
                    </div>

                    <div class="grid grid-cols-3 gap-3 sm:gap-4 pt-4 sm:pt-6 border-t border-gray-800 text-center">
                        <div class="text-gray-400">
                            <i class="fas fa-crown text-royal mb-1 sm:mb-2 text-lg sm:text-xl"></i>
                            <p class="text-xs">Authentic</p>
                        </div>
                        <div class="text-gray-400">
                            <i class="fas fa-truck text-royal mb-1 sm:mb-2 text-lg sm:text-xl"></i>
                            <p class="text-xs">Free Shipping</p>
                        </div>
                        <div class="text-gray-400">
                            <i class="fas fa-undo text-royal mb-1 sm:mb-2 text-lg sm:text-xl"></i>
                            <p class="text-xs">30-Day Returns</p>
                        </div>
                    </div>
                </div>
            `;

            if (product.colors) selectedColors[productId] = product.colors[0];
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function loadModalVideo(productId) {
            const product = products.find(p => p.id === productId);
            const wrapper = document.getElementById('modal-video-wrapper');
            const playBtn = document.getElementById('modal-play-btn');
            const poster = document.getElementById('modal-poster');

            if (!wrapper || loadedVideos.has(`modal-${productId}`)) return;

            playBtn.style.opacity = '0';
            playBtn.style.pointerEvents = 'none';

            const iframe = document.createElement('iframe');
            iframe.className = 'tiktok-iframe';
            iframe.allow = 'fullscreen; autoplay';
            iframe.src = getTikTokEmbedUrl(product.tiktokVideoId, product.tiktokUsername, true);
            
            iframe.onload = () => {
                loadedVideos.add(`modal-${productId}`);
                wrapper.classList.add('active');
                if (poster) poster.style.opacity = '0';
            };

            wrapper.innerHTML = '';
            wrapper.appendChild(iframe);
        }

        function selectColor(productId, color, btn) {
            selectedColors[productId] = color;
            document.querySelectorAll('.color-swatch').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            const text = document.getElementById('selected-color-text');
            if (text) text.textContent = `Selected: ${color}`;
        }

        function addToCartFromModal(productId) {
            const selectedSize = document.querySelector('.size-btn.selected')?.textContent;
            const product = products.find(p => p.id === productId);
            const existing = cart.find(item => item.id === productId && item.selectedSize === selectedSize);
            
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ ...product, quantity: 1, selectedSize: selectedSize || product.sizes[0], selectedColor: selectedColors[productId] || (product.colors ? product.colors[0] : null) });
            }
            
            saveToLocalStorage();
            updateCartUI();
            showToast('Added to cart!');
        }

        function closeQuickView() {
            document.getElementById('quick-view-modal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function selectSize(btn) {
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }

        function buyNow(productId) {
            const product = products.find(p => p.id === productId);
            const selectedSize = document.querySelector('.size-btn.selected')?.textContent || product.sizes[0];
            const selectedColor = selectedColors[productId] || (product.colors ? product.colors[0] : null);
            const phone = '+254704918499';
            
            let message = `üëë *Quick Order - ROYAL Men*%0A%0A*${product.name}*%0ABrand: ${product.brand}%0ACategory: ${product.category}%0ASize: ${selectedSize}`;
            if (selectedColor) message += `%0AColor: ${selectedColor}`;
            message += `%0APrice: $${product.price}%0A%0APlease confirm availability.`;
            
            window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
        }

        function openTikTokFullscreen(videoId, username) {
            const modal = document.getElementById('tiktok-modal');
            const container = document.getElementById('modal-video-container');
            container.innerHTML = `<iframe src="${getTikTokEmbedUrl(videoId, username, true)}" allow="fullscreen; autoplay" style="width: 100%; height: 100%; border: none; border-radius: 1rem;"></iframe>`;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeTikTokModal(e) {
            if (e && e.target !== e.currentTarget) return;
            const modal = document.getElementById('tiktok-modal');
            const container = document.getElementById('modal-video-container');
            container.innerHTML = '';
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function showToast(message = 'Added to cart!', icon = 'crown') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            const toastIcon = toast.querySelector('i');
            
            toastMessage.textContent = message;
            toastIcon.className = `fas fa-${icon} text-lg sm:text-xl`;
            
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2500);
        }

        function initScrollReveal() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        function initStickyNav() {
            const nav = document.getElementById('category-nav');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (!entry.isIntersecting) nav.classList.add('sticky-active');
                    else nav.classList.remove('sticky-active');
                });
            }, { threshold: 0 });
            observer.observe(document.getElementById('products'));
        }

        document.getElementById('quick-view-modal').addEventListener('click', (e) => {
            if (e.target.id === 'quick-view-modal') closeQuickView();
        });

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        function loadMoreProducts() {
            const btn = document.getElementById('load-more-btn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-check"></i> All Items Loaded';
                btn.disabled = true;
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            }, 1000);
        }

        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if (window.scrollY > 50) nav.classList.add('glass-strong');
            else nav.classList.remove('glass-strong');
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeQuickView();
                closeTikTokModal();
                if (document.getElementById('cart-sidebar').classList.contains('open')) toggleCart();
                if (document.getElementById('wishlist-sidebar').classList.contains('open')) toggleWishlist();
            }
            if (e.key === '/' && document.activeElement.tagName !== 'INPUT') {
                e.preventDefault();
                toggleSearch();
            }
        });

        window.addEventListener('beforeunload', () => {
            if (videoIntersectionObserver) videoIntersectionObserver.disconnect();
        });
    </script>
</body>
</html>